{"ast":null,"code":"import axios from 'axios';\nimport { USER_MAIN_DATA, USER_ACTIVITY, USER_AVERAGE_SESSIONS, USER_PERFORMANCE } from '../data.js';\nconst API_URL = 'http://localhost:3000/user/';\n\n// Indicateur pour utiliser les données mockées au lieu de celles du serveur.\nlet useMockData = false;\n\n/**\r\n * Bascule l'utilisation des données entre réelles et mockées et retourne l'état actuel du mode mock pour vérification.\r\n * @returns {boolean} L'état actuel du mode mock.\r\n */\nexport const toggleMockDataUsage = () => {\n  useMockData = !useMockData;\n  // Retourne l'état actuel pour l'utiliser dans l'interface utilisateur\n  return useMockData;\n};\n\n/**\r\n * Obtient l'état actuel de l'utilisation des données mockées.\r\n * @returns {boolean} État de l'utilisation des données mockées.\r\n */\nexport const getMockDataStatus = () => {\n  // Retourne l'état actuel des données mockées\n  return useMockData;\n};\nconst handleApiError = (error, fallbackData) => {\n  console.error(\"Erreur lors de la connexion au backend : \", error);\n  useMockData = true;\n  return {\n    data: fallbackData || {}\n  };\n};\n\n/**\r\n * Récupère les données d'un utilisateur spécifique.\r\n * @param {number} userId - L'identifiant de l'utilisateur.\r\n * @returns {Promise<Object>} Les données de l'utilisateur.\r\n */\nexport const getUserData = async userId => {\n  // Si les données sont mockées\n  if (useMockData) {\n    const userData = USER_MAIN_DATA.find(user => user.id === userId);\n    console.log('données mockées', {\n      data: userData || {}\n    });\n    return {\n      data: userData || {}\n    };\n  }\n  try {\n    // Tente de récupérer les données utilisateur depuis l'API en utilisant l'identifiant fourni.\n    const response = await axios.get(`${API_URL}${userId}`);\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    return handleApiError(error, USER_MAIN_DATA.find(user => user.id === userId));\n  }\n};\n\n/**\r\n * Récupère les données d'activité d'un utilisateur et retourne un objet contenant un tableau des sessions.\r\n * @param {number} userId - L'identifiant de l'utilisateur pour récupérer ses données d'activité.\r\n * @returns {Promise<Object>} Les données d'activité de l'utilisateur.\r\n */\nexport const getUserActivity = async userId => {\n  // Si les données sont mockées\n  if (useMockData) {\n    const activity = USER_ACTIVITY.find(activity => activity.userId === userId);\n    console.log('données mockées', {\n      data: {\n        sessions: activity ? activity.sessions : []\n      }\n    });\n    return {\n      data: {\n        sessions: activity ? activity.sessions : []\n      }\n    };\n  }\n  try {\n    // Récupère les données d'activité de l'utilisateur depuis l'API et les affiche dans la console.\n    const response = await axios.get(`${API_URL}${userId}/activity`);\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    var _USER_ACTIVITY$find;\n    return handleApiError(error, (_USER_ACTIVITY$find = USER_ACTIVITY.find(activity => activity.userId === userId)) === null || _USER_ACTIVITY$find === void 0 ? void 0 : _USER_ACTIVITY$find.sessions);\n  }\n};\n\n/**\r\n * Récupère les données des sessions moyennes d'un utilisateur.\r\n * @param {number} userId - L'identifiant de l'utilisateur.\r\n * @returns {Promise<Object>} Les sessions moyennes de l'utilisateur.\r\n */\nexport const getUserAverageSession = async userId => {\n  // Si les données sont mockées\n  if (useMockData) {\n    const sessionData = USER_AVERAGE_SESSIONS.find(session => session.userId === userId);\n    console.log('données mockées', {\n      data: {\n        sessions: sessionData ? sessionData.sessions : []\n      }\n    });\n    return {\n      data: {\n        sessions: sessionData ? sessionData.sessions : []\n      }\n    };\n  }\n  try {\n    // Fait une requête à l'API pour obtenir les sessions moyennes de l'utilisateur.\n    const response = await axios.get(`${API_URL}${userId}/average-sessions`);\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    var _USER_AVERAGE_SESSION;\n    return handleApiError(error, (_USER_AVERAGE_SESSION = USER_AVERAGE_SESSIONS.find(session => session.userId === userId)) === null || _USER_AVERAGE_SESSION === void 0 ? void 0 : _USER_AVERAGE_SESSION.sessions);\n  }\n};\n\n/**\r\n * Récupère les données de performance d'un utilisateur.\r\n * @param {number} userId - L'identifiant de l'utilisateur pour récupérer ses données de performance.\r\n * @returns {Promise<Object>} Les données de performance de l'utilisateur.\r\n */\nexport const getUserPerformance = async userId => {\n  // Si les données sont mockées\n  if (useMockData) {\n    const performance = USER_PERFORMANCE.find(perf => perf.userId === userId);\n    console.log('données mockées', {\n      data: performance ? performance.data : [],\n      kind: performance ? performance.kind : {}\n    });\n    return {\n      data: performance ? performance.data : [],\n      kind: performance ? performance.kind : {}\n    };\n  }\n  try {\n    // Effectue une requête pour obtenir les performances.\n    const response = await axios.get(`${API_URL}${userId}/performance`);\n    console.log(response.data);\n    return response.data.data;\n  } catch (error) {\n    var _USER_PERFORMANCE$fin;\n    return handleApiError(error, (_USER_PERFORMANCE$fin = USER_PERFORMANCE.find(perf => perf.userId === userId)) === null || _USER_PERFORMANCE$fin === void 0 ? void 0 : _USER_PERFORMANCE$fin.data);\n  }\n};","map":{"version":3,"names":["axios","USER_MAIN_DATA","USER_ACTIVITY","USER_AVERAGE_SESSIONS","USER_PERFORMANCE","API_URL","useMockData","toggleMockDataUsage","getMockDataStatus","handleApiError","error","fallbackData","console","data","getUserData","userId","userData","find","user","id","log","response","get","getUserActivity","activity","sessions","_USER_ACTIVITY$find","getUserAverageSession","sessionData","session","_USER_AVERAGE_SESSION","getUserPerformance","performance","perf","kind","_USER_PERFORMANCE$fin"],"sources":["C:/Users/ghisl/Desktop/p12/dev_tableau_de_bord_avec_react/src/services/apiService.js"],"sourcesContent":["import axios from 'axios';\r\nimport { USER_MAIN_DATA, USER_ACTIVITY, USER_AVERAGE_SESSIONS, USER_PERFORMANCE } from '../data.js';\r\n\r\nconst API_URL = 'http://localhost:3000/user/';\r\n\r\n// Indicateur pour utiliser les données mockées au lieu de celles du serveur.\r\nlet useMockData = false;\r\n\r\n/**\r\n * Bascule l'utilisation des données entre réelles et mockées et retourne l'état actuel du mode mock pour vérification.\r\n * @returns {boolean} L'état actuel du mode mock.\r\n */\r\nexport const toggleMockDataUsage = () => {\r\n  useMockData = !useMockData;\r\n  // Retourne l'état actuel pour l'utiliser dans l'interface utilisateur\r\n  return useMockData;\r\n};\r\n\r\n/**\r\n * Obtient l'état actuel de l'utilisation des données mockées.\r\n * @returns {boolean} État de l'utilisation des données mockées.\r\n */\r\nexport const getMockDataStatus = () => {\r\n  // Retourne l'état actuel des données mockées\r\n  return useMockData; \r\n};\r\n\r\nconst handleApiError = (error, fallbackData) => {\r\n  console.error(\"Erreur lors de la connexion au backend : \", error);\r\n  useMockData = true;\r\n  return { data: fallbackData || {} };\r\n};\r\n\r\n/**\r\n * Récupère les données d'un utilisateur spécifique.\r\n * @param {number} userId - L'identifiant de l'utilisateur.\r\n * @returns {Promise<Object>} Les données de l'utilisateur.\r\n */\r\nexport const getUserData = async (userId) => {\r\n  // Si les données sont mockées\r\n  if (useMockData) {\r\n    const userData = USER_MAIN_DATA.find(user => user.id === userId);\r\n    console.log('données mockées', { data: userData || {} })\r\n    return { data: userData || {} };\r\n  }\r\n  try {\r\n    // Tente de récupérer les données utilisateur depuis l'API en utilisant l'identifiant fourni.\r\n    const response = await axios.get(`${API_URL}${userId}`);\r\n    console.log(response.data);\r\n    return response.data;\r\n  } catch (error) {\r\n    return handleApiError(error, USER_MAIN_DATA.find(user => user.id === userId));\r\n  }\r\n};\r\n\r\n/**\r\n * Récupère les données d'activité d'un utilisateur et retourne un objet contenant un tableau des sessions.\r\n * @param {number} userId - L'identifiant de l'utilisateur pour récupérer ses données d'activité.\r\n * @returns {Promise<Object>} Les données d'activité de l'utilisateur.\r\n */\r\nexport const getUserActivity = async (userId) => {\r\n  // Si les données sont mockées\r\n  if (useMockData) {\r\n    const activity = USER_ACTIVITY.find(activity => activity.userId === userId);\r\n    console.log('données mockées', { data: { sessions: activity ? activity.sessions : [] } })\r\n    return { data: { sessions: activity ? activity.sessions : [] } };\r\n  }\r\n  try {\r\n    // Récupère les données d'activité de l'utilisateur depuis l'API et les affiche dans la console.\r\n    const response = await axios.get(`${API_URL}${userId}/activity`);\r\n    console.log(response.data);\r\n    return response.data;\r\n  } catch (error) {\r\n    return handleApiError(error, USER_ACTIVITY.find(activity => activity.userId === userId)?.sessions);\r\n  }\r\n};\r\n\r\n/**\r\n * Récupère les données des sessions moyennes d'un utilisateur.\r\n * @param {number} userId - L'identifiant de l'utilisateur.\r\n * @returns {Promise<Object>} Les sessions moyennes de l'utilisateur.\r\n */\r\nexport const getUserAverageSession = async (userId) => {\r\n  // Si les données sont mockées\r\n  if (useMockData) {\r\n    const sessionData = USER_AVERAGE_SESSIONS.find(session => session.userId === userId);\r\n    console.log('données mockées', { data: { sessions: sessionData ? sessionData.sessions : [] } })\r\n    return { data: { sessions: sessionData ? sessionData.sessions : [] } };\r\n  }\r\n  try {\r\n    // Fait une requête à l'API pour obtenir les sessions moyennes de l'utilisateur.\r\n    const response = await axios.get(`${API_URL}${userId}/average-sessions`);\r\n    console.log(response.data);\r\n    return response.data;\r\n  } catch (error) {\r\n    return handleApiError(error, USER_AVERAGE_SESSIONS.find(session => session.userId === userId)?.sessions);\r\n  }\r\n};\r\n\r\n/**\r\n * Récupère les données de performance d'un utilisateur.\r\n * @param {number} userId - L'identifiant de l'utilisateur pour récupérer ses données de performance.\r\n * @returns {Promise<Object>} Les données de performance de l'utilisateur.\r\n */\r\nexport const getUserPerformance = async (userId) => {\r\n  // Si les données sont mockées\r\n  if (useMockData) {\r\n    const performance = USER_PERFORMANCE.find(perf => perf.userId === userId);\r\n    console.log('données mockées', { data: performance ? performance.data : [], kind: performance ? performance.kind : {} })\r\n    return { data: performance ? performance.data : [], kind: performance ? performance.kind : {} };\r\n  }\r\n  try {\r\n    // Effectue une requête pour obtenir les performances.\r\n    const response = await axios.get(`${API_URL}${userId}/performance`);\r\n    console.log(response.data);\r\n    return response.data.data;\r\n  } catch (error) {\r\n    return handleApiError(error, USER_PERFORMANCE.find(perf => perf.userId === userId)?.data);\r\n  }\r\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,cAAc,EAAEC,aAAa,EAAEC,qBAAqB,EAAEC,gBAAgB,QAAQ,YAAY;AAEnG,MAAMC,OAAO,GAAG,6BAA6B;;AAE7C;AACA,IAAIC,WAAW,GAAG,KAAK;;AAEvB;AACA;AACA;AACA;AACA,OAAO,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;EACvCD,WAAW,GAAG,CAACA,WAAW;EAC1B;EACA,OAAOA,WAAW;AACpB,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAME,iBAAiB,GAAGA,CAAA,KAAM;EACrC;EACA,OAAOF,WAAW;AACpB,CAAC;AAED,MAAMG,cAAc,GAAGA,CAACC,KAAK,EAAEC,YAAY,KAAK;EAC9CC,OAAO,CAACF,KAAK,CAAC,2CAA2C,EAAEA,KAAK,CAAC;EACjEJ,WAAW,GAAG,IAAI;EAClB,OAAO;IAAEO,IAAI,EAAEF,YAAY,IAAI,CAAC;EAAE,CAAC;AACrC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMG,WAAW,GAAG,MAAOC,MAAM,IAAK;EAC3C;EACA,IAAIT,WAAW,EAAE;IACf,MAAMU,QAAQ,GAAGf,cAAc,CAACgB,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKJ,MAAM,CAAC;IAChEH,OAAO,CAACQ,GAAG,CAAC,iBAAiB,EAAE;MAAEP,IAAI,EAAEG,QAAQ,IAAI,CAAC;IAAE,CAAC,CAAC;IACxD,OAAO;MAAEH,IAAI,EAAEG,QAAQ,IAAI,CAAC;IAAE,CAAC;EACjC;EACA,IAAI;IACF;IACA,MAAMK,QAAQ,GAAG,MAAMrB,KAAK,CAACsB,GAAG,CAAE,GAAEjB,OAAQ,GAAEU,MAAO,EAAC,CAAC;IACvDH,OAAO,CAACQ,GAAG,CAACC,QAAQ,CAACR,IAAI,CAAC;IAC1B,OAAOQ,QAAQ,CAACR,IAAI;EACtB,CAAC,CAAC,OAAOH,KAAK,EAAE;IACd,OAAOD,cAAc,CAACC,KAAK,EAAET,cAAc,CAACgB,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKJ,MAAM,CAAC,CAAC;EAC/E;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMQ,eAAe,GAAG,MAAOR,MAAM,IAAK;EAC/C;EACA,IAAIT,WAAW,EAAE;IACf,MAAMkB,QAAQ,GAAGtB,aAAa,CAACe,IAAI,CAACO,QAAQ,IAAIA,QAAQ,CAACT,MAAM,KAAKA,MAAM,CAAC;IAC3EH,OAAO,CAACQ,GAAG,CAAC,iBAAiB,EAAE;MAAEP,IAAI,EAAE;QAAEY,QAAQ,EAAED,QAAQ,GAAGA,QAAQ,CAACC,QAAQ,GAAG;MAAG;IAAE,CAAC,CAAC;IACzF,OAAO;MAAEZ,IAAI,EAAE;QAAEY,QAAQ,EAAED,QAAQ,GAAGA,QAAQ,CAACC,QAAQ,GAAG;MAAG;IAAE,CAAC;EAClE;EACA,IAAI;IACF;IACA,MAAMJ,QAAQ,GAAG,MAAMrB,KAAK,CAACsB,GAAG,CAAE,GAAEjB,OAAQ,GAAEU,MAAO,WAAU,CAAC;IAChEH,OAAO,CAACQ,GAAG,CAACC,QAAQ,CAACR,IAAI,CAAC;IAC1B,OAAOQ,QAAQ,CAACR,IAAI;EACtB,CAAC,CAAC,OAAOH,KAAK,EAAE;IAAA,IAAAgB,mBAAA;IACd,OAAOjB,cAAc,CAACC,KAAK,GAAAgB,mBAAA,GAAExB,aAAa,CAACe,IAAI,CAACO,QAAQ,IAAIA,QAAQ,CAACT,MAAM,KAAKA,MAAM,CAAC,cAAAW,mBAAA,uBAA1DA,mBAAA,CAA4DD,QAAQ,CAAC;EACpG;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAME,qBAAqB,GAAG,MAAOZ,MAAM,IAAK;EACrD;EACA,IAAIT,WAAW,EAAE;IACf,MAAMsB,WAAW,GAAGzB,qBAAqB,CAACc,IAAI,CAACY,OAAO,IAAIA,OAAO,CAACd,MAAM,KAAKA,MAAM,CAAC;IACpFH,OAAO,CAACQ,GAAG,CAAC,iBAAiB,EAAE;MAAEP,IAAI,EAAE;QAAEY,QAAQ,EAAEG,WAAW,GAAGA,WAAW,CAACH,QAAQ,GAAG;MAAG;IAAE,CAAC,CAAC;IAC/F,OAAO;MAAEZ,IAAI,EAAE;QAAEY,QAAQ,EAAEG,WAAW,GAAGA,WAAW,CAACH,QAAQ,GAAG;MAAG;IAAE,CAAC;EACxE;EACA,IAAI;IACF;IACA,MAAMJ,QAAQ,GAAG,MAAMrB,KAAK,CAACsB,GAAG,CAAE,GAAEjB,OAAQ,GAAEU,MAAO,mBAAkB,CAAC;IACxEH,OAAO,CAACQ,GAAG,CAACC,QAAQ,CAACR,IAAI,CAAC;IAC1B,OAAOQ,QAAQ,CAACR,IAAI;EACtB,CAAC,CAAC,OAAOH,KAAK,EAAE;IAAA,IAAAoB,qBAAA;IACd,OAAOrB,cAAc,CAACC,KAAK,GAAAoB,qBAAA,GAAE3B,qBAAqB,CAACc,IAAI,CAACY,OAAO,IAAIA,OAAO,CAACd,MAAM,KAAKA,MAAM,CAAC,cAAAe,qBAAA,uBAAhEA,qBAAA,CAAkEL,QAAQ,CAAC;EAC1G;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMM,kBAAkB,GAAG,MAAOhB,MAAM,IAAK;EAClD;EACA,IAAIT,WAAW,EAAE;IACf,MAAM0B,WAAW,GAAG5B,gBAAgB,CAACa,IAAI,CAACgB,IAAI,IAAIA,IAAI,CAAClB,MAAM,KAAKA,MAAM,CAAC;IACzEH,OAAO,CAACQ,GAAG,CAAC,iBAAiB,EAAE;MAAEP,IAAI,EAAEmB,WAAW,GAAGA,WAAW,CAACnB,IAAI,GAAG,EAAE;MAAEqB,IAAI,EAAEF,WAAW,GAAGA,WAAW,CAACE,IAAI,GAAG,CAAC;IAAE,CAAC,CAAC;IACxH,OAAO;MAAErB,IAAI,EAAEmB,WAAW,GAAGA,WAAW,CAACnB,IAAI,GAAG,EAAE;MAAEqB,IAAI,EAAEF,WAAW,GAAGA,WAAW,CAACE,IAAI,GAAG,CAAC;IAAE,CAAC;EACjG;EACA,IAAI;IACF;IACA,MAAMb,QAAQ,GAAG,MAAMrB,KAAK,CAACsB,GAAG,CAAE,GAAEjB,OAAQ,GAAEU,MAAO,cAAa,CAAC;IACnEH,OAAO,CAACQ,GAAG,CAACC,QAAQ,CAACR,IAAI,CAAC;IAC1B,OAAOQ,QAAQ,CAACR,IAAI,CAACA,IAAI;EAC3B,CAAC,CAAC,OAAOH,KAAK,EAAE;IAAA,IAAAyB,qBAAA;IACd,OAAO1B,cAAc,CAACC,KAAK,GAAAyB,qBAAA,GAAE/B,gBAAgB,CAACa,IAAI,CAACgB,IAAI,IAAIA,IAAI,CAAClB,MAAM,KAAKA,MAAM,CAAC,cAAAoB,qBAAA,uBAArDA,qBAAA,CAAuDtB,IAAI,CAAC;EAC3F;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}